import{d as l,a as m,l as D}from"./index.44e508e1.js";import{a as N,b as L}from"./index.119f9a73.js";import{h}from"./index.c4f80e29.js";import{e as d}from"./index.b83f9b73.js";import{d as A,o as P,a as F,b as I}from"./store.7d643b16.js";import"./hoisted.bcbc06b0.js";import"./hoisted.802e346a.js";import"./lazy.ac812cf9.js";import"./signals.module.c4a15b4f.js";import"./preact.module.f85bee2d.js";import"./hooks.module.01477339.js";import"./preload-helper.87151e19.js";function q(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*e(){}q.g=e}const g=(e,t)=>{if(+__PN_DATA__.uid<=0)return t&&t();e()};let f=null;const S=()=>{if(f)return f;const e=document.querySelector("[data-closest]");return f=Object.assign({},e==null?void 0:e.dataset),f};l("click","[data-downld-name]",function(){const e=this.dataset.downldName,t=this.dataset.downldUrl,n=this.dataset.downldSuffix,o=this.dataset.hueid,s=S();if(!e)return;const a=document.getElementById("GoPremiumBtn");g(()=>{switch(o&&d(o),e){case"png":case"rar":case"ppt":case"twibbon":const i=s.fee=="1"&&e==="png";A({type:s.type||"1",btnType:e,rarName:n||"PSD",goPremiumTxt:(a==null?void 0:a.textContent)||"Go Premium",href:t,downUrl:t,fee:i,licenseType:s.licenseType||0},!1);break;case"edit":t&&window.open(t,"_blank");break;case"mobile":const r=document.querySelector("._cE");r&&(r.__top__=r.__top__||r.getBoundingClientRect().top-40+N(),L(r.__top__));break;default:t&&setTimeout(()=>{window.open(t,"_blank")},100);break}},()=>{d("down-btnnologin")})});l("click","[data-share-btn]",function(){const e=this.dataset.shareBtn,t=location.origin+location.pathname,n=W();switch(e){case"pinterest":I(t+"?share=3",n.media,n.word);break;case"facebook":F(t+"?share=2");break;case"twitter":P(t+"?share=1",n.title);break}});function W(){const e={title:"",media:"",word:""},t=document.querySelector("[data-share-media]");if(t){const{shareTitle:n,shareMedia:o,shareWord:s}=t.dataset;e.title=n||"",e.media=o||"",e.word=s||""}return e}const B="._kJ";l("click",B,function(){setTimeout(()=>{d("der-followmain")}),g(()=>{const e=this.dataset.follow,t=this.textContent,n=this.dataset.txt;this.disabled=!0,h.post("/api/async/designer-follow",{id:e}).then(o=>{o.status===200&&(this.textContent=n,this.dataset.txt=t)}).finally(()=>{this.disabled=!1})})});const j="._iE a";l("click","[data-prf-type]",function(){g(()=>{const t=this.dataset.prfType==="enterprise",n=t?"team":"",o=S(),{vip_type:s,enterprise_status:a}=window.__PN_DATA__;o.licenseType==2&&a=="0"?window.open("/team-pay/card?type=2&b=121","_blank"):+s<=0?(m(document,"dialog:toggle",{name:"prf-license",show:!0}),d("prfview-btn"+n)):(this.disabled=!0,m(document,"down:prf",{data:o,isTeam:t,resolve:()=>{this.disabled=!1},reject:()=>{this.disabled=!1}}),d("prfdown-btn"+n))})});l("click",j,function(e){e.preventDefault(),d("relatekeyword-report"),this.href&&setTimeout(()=>{window.open(this.href,"_blank")},100)});const E="._lG ._hJ";l("click",E,function(){const e=this.dataset.id;e&&d(`url-similartype-${e}`)});l("click","._qE>span",function(){m(this.parentElement.querySelector('[data-huejs="der-linkmain"]'),"click")});const x="._lJ",H="._WK",y=()=>{m(document,"dialog:toggle",{name:"PreviewImage",show:!0})},b=e=>{var t;(t=document.querySelector(H))==null||t.classList[e?"add":"remove"]("_Fe")},w=e=>{e.preventDefault()};l("click",x,function(e){w(e),setTimeout(()=>{d("detail-preview-image")},100);const t=document.getElementById("PreviewImage");if(t){if(t.querySelector("img"))return y()}else return;const n=this.querySelector("a"),o=this.querySelector("img");if(!n||!o)return;const s=n.href||o.currentSrc||o.src;if(!s)return;y();const a=n.offsetHeight>n.parentElement.offsetHeight,i=document.createElement("img"),r=a?t:i;r.style.maxWidth=window.innerWidth-40+"px",r.style.maxHeight=window.innerHeight-120+"px",i.className=t.dataset.imgClass||"",i.style.minWidth=a?"640px":"auto",i.alt="",i.oncontextmenu=w,i.onload=i.onabort=i.onerror=()=>{requestAnimationFrame(()=>{b(!0)})},i.src=s,requestAnimationFrame(()=>{b(),t.appendChild(i)})});l("contextmenu",x,w);const R="._XK",U="._YK",K="._ZK",G=["_j","_Gp"];J();function J(){if(window.innerWidth<1024)return;const e=document.querySelectorAll(R);for(const t of e){const n=t.querySelector(U),o=t.querySelector(K);if(!n||!o)continue;const s=[...n.children].filter(_=>_!==o),a=s.length,i=s[a-1];if(a<=1||i&&i.offsetTop<=0)continue;const r=getComputedStyle(o,null),u=z({box_w:n.offsetWidth,btn_w:o.offsetWidth,mx:(parseFloat(r.marginLeft)||0)+parseFloat(r.marginRight)||0,len:a,btns:s});$(u,n,o,t)}}function $(e,t,n,o){const s="+"+e.count,a=n.dataset.less,i=o.offsetHeight,r=t.offsetHeight,u=()=>{e.show=!1,n.textContent=s,n.style.removeProperty("width"),t.insertBefore(n,e.el),o.style.cssText+=`height:${i}px;`};D(n,"click",()=>{if(e.show)return u();e.show=!0,t.appendChild(n),n.textContent=a,n.style.width="auto",o.style.cssText+=`height:${r}px;`}),u(),e.count>0&&requestAnimationFrame(()=>{n.classList.remove(...G)})}function z({len:e,mx:t,box_w:n,btn_w:o,btns:s}){const a={el:null,i:0,count:0,show:!1};let i=0;for(let r=0;r<e;r++){const u=s[r];if(i+=u.offsetWidth+t,i+o+t>=n){a.i=r,a.el=u;break}}return a.count=e-a.i,a}const T='input[name="prfRealName"],input[name="prfCompanyName"]',k="_fH",M="._sL label",c={},v="sorry,there are some problems,please contract us...";document.addEventListener("down:prf",e=>{Object.assign(c,e.detail),V()});l("input",T,function(){this.parentElement.querySelector("span").hidden=!!this.value});let p=null;l("click",M,function(){this.classList.add(k),p=this},()=>{p&&(p.classList.remove(k),p=null)});l("click","._tL",function(){const e=O();if(e){this.disabled=!0;const t="/api/message/vrf-name"+(c.isTeam?"-team":""),n={name:e.prfRealName,company_name:e.prfCompanyName,...c.data};(()=>c.isTeam?h.post(t,n):h.get(t,n))().then(s=>{this.disabled=!1,C(!1),s.status==1&&s.url?window.open(s.url,"_blank"):s.status==404&&alert(v)}).catch(()=>{this.disabled=!1})}});function O(){const e=document.querySelectorAll(T),t=new Set,n={};for(const o of e){const s=o.value.trim();o.parentElement.classList[s?"remove":"add"]("_BD"),s?n[o.name]=s:t.add(0)}return t.size?null:n}function C(e){m(document,"dialog:toggle",{name:"prfActualName",show:e})}async function V(){const e=c.data;if(!e)return;const t="/api/message/vrf-file"+(c.isTeam?"-team":"");h.get(t,{id:e.id,type:e.type,controller:e.controller}).then(n=>{if(n.status==1&&n.url)window.open(n.url,"_blank");else if(!c.isTeam&&n.status==2)alert("sorry,you cannot download personal PRF");else if(n.status==404)alert(v);else{if(n.name){const o=document.querySelector('input[name="prfRealName"]');o&&(o.value=n.name)}C(!0)}}).then(c.resolve).catch(c.reject).finally(()=>{delete c.resolve,delete c.reject})}export{q as __vite_legacy_guard};